Initialize() {
   GetD=/projects/yeti4009/code/Programs/DIST/get_dist
   fTdiff=$1
   name=`echo $1 | cut -d. -f1`
   fout=${name}_by_azi.txt
   slon=-114.8770
   slon=`echo $slon | awk '{if($1<0){print $1+360.}else{print $1}}'`
   slat=41.160
}



### main ###
Initialize $1
rm -f $fout
while read line; do
   lon=`echo $line | awk '{print $1}'`
   lat=`echo $line | awk '{print $2}'`
   dat=`echo $line | awk '{print $3}'`
   azi=`$GetD $slat $slon $lat $lon a1`
   dis=`$GetD $slat $slon $lat $lon d`
   vel=`echo $dis $dat | awk '{print $1/$2}'`
   echo $azi $dat $dis $vel $lon $lat >> $fout
done < $fTdiff
echo $fout
