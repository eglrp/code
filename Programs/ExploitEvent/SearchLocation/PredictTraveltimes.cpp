/* Based on the input location and focal mechanism, predict group delay, phase shift, and amplitude ratio and Output the fit to the measurements */

#include "EQKSearcher.h"
#include <cstring>
#include <iostream>
#include <stdexcept>

int main( int argc, char *argv[] ) {
	if( argc!=2 && argc!=3 ) {
		std::cerr<<"Usage: "<<argv[0]<<" [parameter file] [NoDiscard (optional)]"<<std::endl;
		exit(-1);
	}

	bool discard = true;
	if( argc==3 && strcmp(argv[2],"NoDiscard")==0 ) discard=false;

	try {
		EQKSearcher eSearcher( argv[1], false );

		eSearcher.LoadData();

		// output maps (with bad data excluded!)
		eSearcher.Output( discard, EQKSearcher::MAP );

	} catch(std::exception& e) {
		std::cerr<<e.what()<<std::endl;
		return -1;
	} catch(...) {
		std::cerr<<"Unknown Exception!"<<std::endl;
		return -2;
	}

	return 0;
}
